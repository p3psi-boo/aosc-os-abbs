From 2e7daea32d5af4392495f272c3b87427dd5dba0b Mon Sep 17 00:00:00 2001
From: Chao Li <lichao@loongson.cn>
Date: Tue, 18 Jun 2024 10:39:55 +0800
Subject: [PATCH 38/43] app/main: Adjust the inline ASM to i386 only

Make the inline ASM code in function run_at as i386 ARCH only.

Singed-off-by: Chao Li <lichao@loongson.cn>
---
 app/main.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/app/main.c b/app/main.c
index 3daedc2..3848e28 100644
--- a/app/main.c
+++ b/app/main.c
@@ -165,7 +165,7 @@ static void run_at(uintptr_t addr, int my_cpu)
     }
     LONG_BARRIER;
 
-#ifndef __x86_64__
+#ifdef __i386__
     // The 32-bit startup code needs to know where it is located.
     __asm__ __volatile__("movl %0, %%edi" : : "r" (new_start_addr));
 #endif
-- 
2.43.4

